public class ChatConfigurator extends Configurator{

	@Override
	public void modifyHandshake(ServerEndpointConfig sec, HandshakeRequest request, HandshakeResponse response) { // 통신 규칙 정하기
		
		HttpSession session = (HttpSession)request.getHttpSession(); // 1) 세션 정보를 꺼내라
		
		sec.getUserProperties().put("hSession", session); // 2) 엔드포인트 전달하고 싶은 사용자 정보를 담음 ServerEndpointConfig는 엔드포인트에 접근 가능하다.
		
	}
}

@OnOpen // 
public void onConnect(Session session, EndpointConfig config) { 
	this.hSession = (HttpSession)config.getUserProperties().get("hSession"); // 넣어놨던 HTTP Session을 꺼낸다.
	clients.add(session);
	System.out.println(hSession.getAttribute("loginID")); // 세션 안의 키를 통해 값을 꺼낸다.
}